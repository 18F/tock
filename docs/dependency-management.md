# Dependency management

[:arrow_left: Back to Tock Documentation](../docs)

## Python

Tock uses [Pipenv] to manage development and production dependencies.
In both development and continuous integration, the Python environment is
established with `pipenv install --dev`. 

To accommodate third-party tools that do not yet support [Pipenv], [Pipenv] generates a `requirements.txt` file (containing
only production dependencies) and includes it in the repository.

You can update development and production dependencies locally with the following:

```sh
pipenv update --dev
pipenv lock --requirements > requirements.txt
```

## JavaScript

### Production

Tock uses Django's staticfiles functionality to serve frontend dependencies in production.

Updates for dependencies must be committed directly to this repository in `tock/tock/static`

### Development/Testing
Tock uses [npm] to manage development/testing JavaScript dependencies.

Update dependencies locally with the following:

```sh
npm update
```

## Preserving dependency artifacts

All files generated by updating dependencies, including but not limited to the
following files, should be committed to the repository. These files should be
treated as binary files so that they aren't diffed by Git. Add any files meeting this
description to the `.gitattributes` file at the root of the repository with the
`binary` flag.

- `package-lock.json`
- `requirements.txt`
- `Pipfile.lock`

[Pipenv]: https://docs.pipenv.org/
[npm]: https://www.npmjs.com
